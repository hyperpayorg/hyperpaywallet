
# HPWalletCore
HPWalletCore è‡´åŠ›äºæ‰“é€ ä¸€æ¬¾ç®€å•æ˜“ç”¨çš„è·¨å¹³å°é’±åŒ…åº“ã€‚ å®ƒæä¾›äº†ç»Ÿä¸€çš„API,å…è®¸ä½¿ç”¨è€…åœ¨BTCã€ETHã€ETCã€LTCã€DASHã€DOGEã€QTUMã€USDTä»£å¸ä¸Šå¯¼å‡ºç§é’¥ã€å…¬é’¥å’Œåœ°å€,å¹¶æä¾›ç›¸åº”æ„é€ äº¤æ˜“çš„æ–¹æ³•ã€‚
å¦å¤–,åŒºåˆ«äºå…¶ä»–ç¬¬ä¸‰æ–¹é’±åŒ…æ–¹æ¡ˆ:æˆ‘ä»¬åœ¨å¯¼å…¥åŠ©è®°è¯ã€ç§é’¥æ—¶,é€‰å¡«äº†æ‰‹æœºUDIDä»¥åŠå¯†ç å±æ€§ã€‚å³ä¾¿æ˜¯åŠ©è®°è¯é­é‡æ³„æ¼,åœ¨æ²¡æœ‰æ‚¨çš„æ‰‹æœºæˆ–å¯†ç æƒ…å†µä¸‹,ä¹Ÿéš¾ä»¥ç›—å–æ‚¨çš„æ•°å­—èµ„äº§,ç¡®ä¿æ‚¨çš„æ•°å­—èµ„äº§è¶³å¤Ÿå®‰å…¨!

[è‹±æ–‡ç‰ˆğŸ‡ºğŸ‡¸](https://github.com/hyperpayorg/hyperpaywallet/blob/master/README_CN.md)
# HPWalletCore Supports

å½“å‰ HPWalletCore æ‰€æ”¯æŒçš„åŠ©è®°è¯/ç§é’¥å¯¼å…¥å’Œæ„é€ äº¤æ˜“ç­¾åå¦‚ä¸‹æ‰€ç¤ºï¼š

|å¸ç§åç§°|åŠ©è®°è¯å¯¼å…¥|ç§é’¥å¯¼å…¥|äº¤æ˜“ç­¾å|æ„é€ äº¤æ˜“æŸ¥è¯¢|å¤‡æ³¨|
|:----:|:----:|:----:|:----:|:----:|:----:|
|BTC|âœ”ï¸|âœ”ï¸|âœ”ï¸|[DecodeTx](https://live.blockcypher.com/btc/decodetx/)ã€[Broadcast](https://blockchair.com/broadcast)|
|BCH|âœ”ï¸|âœ”ï¸|âœ”ï¸|[PushTx](https://bch.btc.com/16Lp3ZvcusRGtqy7DgF5gz6PGutvuEtwRt)|
|DASH|âœ”ï¸|âœ”ï¸|âœ”ï¸|[Broadcast](https://insight.dash.org/insight/tx/send)ã€[DecodeTx](https://live.blockcypher.com/dash/decodetx/)|
|DOGE|âœ”ï¸|âœ”ï¸|âœ”ï¸|[DecodeTx](https://live.blockcypher.com/doge/decodetx/)ã€[Broadcast](https://blockchair.com/broadcast)|
|ETH|âœ”ï¸|âœ”ï¸|âœ”ï¸|[PushTx](https://etherscan.io/pushTx?%253Flang=zh-CN)ã€[Broadcast](https://badmofo.github.io/ethsend/)|æ”¯æŒERC20|
|ETC|âœ”ï¸|âœ”ï¸|âœ”ï¸|[PushTx](https://etherscan.io/pushTx?%253Flang=zh-CN)||
|LTC|âœ”ï¸|âœ”ï¸|âœ”ï¸|[PushTx](https://bch.btc.com/16Lp3ZvcusRGtqy7DgF5gz6PGutvuEtwRt)|
|QTUM|âœ”ï¸|âœ”ï¸|âœ”ï¸|[PushTx](https://qtum.info/misc/raw-tx)|æ”¯æŒQRC20|
|USDT|âœ”ï¸|âœ”ï¸|âœ”ï¸|[DecodeTx](https://live.blockcypher.com/btc/decodetx/)ã€[Broadcast](https://blockchair.com/broadcast)|


<!-- |--|âœ”ï¸|âŒ|âŒ| -->
## ç¯å¢ƒå®‰è£…
- [Go è¯­è¨€ç¯å¢ƒå®‰è£…](https://www.runoob.com/go/go-environment.html)
- [Go&Gomobile ç¯å¢ƒæ­å»º](https://www.jianshu.com/p/d6d6af4cac4d)
- åœ¨ hpywallet ç›®å½•ä¸‹,ç¼–è¯‘ Android å¼•ç”¨åº“:`gomobile bind -target=android .`
- åœ¨ hpywallet ç›®å½•ä¸‹,ç¼–è¯‘ iOS å¼•ç”¨åº“:`gomobile bind -target=ios .`
- å¯¹äºå­˜åœ¨å¯èƒ½ç¼ºå°‘çš„ç±»åº“xxx  `go get xxx å³å¯`


## æ ¹ Seed ç”Ÿæˆæ–¹æ³•

é€šè¿‡ `å¯¼å…¥` åŠ©è®°è¯&å¯†ç  å¯ä»¥äº§ç”Ÿ Seedã€‚

å¯¼å…¥åŠ©è®°è¯ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```go
func GenerateSeed(mnemonic string, password string)
```

> å¿…è¦å‚æ•°è¯´æ˜ï¼šåŠ©è®°è¯ mnemonic,   password å¯†ç 

åˆ›å»ºè¿”å›çš„æ•°æ®ç»“æ„, `åå…­è¿›åˆ¶ Seed`
### GenerateSeed Example
```go
mnemonic := "xxx xxx"
seed := hpywallet.GenerateSeed(mnemonic, "")
fmt.Println("Seed = ", seed)
```
## åŠ©è®°è¯ç”Ÿæˆé’±åŒ…

é€šè¿‡ `å¯¼å…¥`åŠ©è®°è¯å¯ä»¥äº§ç”Ÿ ç§é’¥ã€å…¬é’¥ã€åœ°å€ã€‚

å¯¼å…¥åŠ©è®°è¯ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```go
func GenerateWallet(mnemonic string, coin string)
```

> å¿…è¦å‚æ•°è¯´æ˜ï¼šåŠ©è®°è¯ mnemonic,  ä¸»é“¾å¸åç§° coin
  
åˆ›å»ºè¿”å›çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š

```go
type WalletAccount struct {
	ResCode    int    // 0 å¤±è´¥ 1 æˆåŠŸ
	Address    string // æˆåŠŸå¿…å®šåŒ…å«åœ°å€
	PublicKey  string // å…¬é’¥
	PrivateKey string // ç§é’¥
	Seed       string // æ–°å¢ æ ¹Seed
	Coin       string // å¸ç§
	ErrMsg     string // å¤±è´¥åŸå› (ä¾¿äºæ’æŸ¥é—®é¢˜,ä¸æ˜¯å¿…å®šè¿”å›)
	ErrCode    int    //é”™è¯¯ç (æš‚æ—¶ä¿ç•™)
	Params     []byte //é¢„ç•™å­—æ®µ
}

```
### GenerateWallet Example
```go
mnemonic := "xxx xxx"
dogeWallet := hpywallet.GenerateWallet(mnemonic, "doge")
fmt.Println("dogeWallet: ", dogeWallet)
```
## åŠ©è®°è¯ & password ç”Ÿæˆé’±åŒ…

é€šè¿‡ `å¯¼å…¥` åŠ©è®°è¯&å¯†ç  å¯ä»¥äº§ç”Ÿ ç§é’¥ã€å…¬é’¥ã€åœ°å€ã€‚

å¯¼å…¥åŠ©è®°è¯ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```go
func GenerateMnemonicWallet(mnemonic, password, coin string)
```

> å¿…è¦å‚æ•°è¯´æ˜ï¼šåŠ©è®°è¯ mnemonic, password å¯†ç , ä¸»é“¾å¸åç§° coin

åˆ›å»ºè¿”å›çš„æ•°æ®ç»“æ„,åŒ `åŠ©è®°è¯ç”Ÿæˆé’±åŒ…`
### GenerateMnemonicWallet Example
```go
mnemonic := "xxx xxx"
btcWallet := hpywallet.GenerateMnemonicWallet(mnemonic, "123456", "btc")
fmt.Println("btcWallet: ", btcWallet)
```
## æ ¹ Seed ç”Ÿæˆé’±åŒ…

é€šè¿‡ `å¯¼å…¥` Root Seed & ä¸»é“¾å¸ Coin å¯ä»¥äº§ç”Ÿ ç§é’¥ã€å…¬é’¥ã€åœ°å€ã€‚

å¯¼å…¥åŠ©è®°è¯ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```go
func GenerateSeedWallet(seed string, coin string)
```

> å¿…è¦å‚æ•°è¯´æ˜ï¼šæ ¹ Seed,  ä¸»é“¾å¸åç§° coin

åˆ›å»ºè¿”å›çš„æ•°æ®ç»“æ„,åŒ `åŠ©è®°è¯ç”Ÿæˆé’±åŒ…`
### GenerateSeedWallet Example
```go
mnemonic := "xxx xxx"
btcWallet := hpywallet.GenerateSeedWallet(seed, "btc")
fmt.Println("btcWallet: ", btcWallet)
```
## å¯¼å…¥ç§é’¥(WIF)ç”Ÿæˆé’±åŒ…

é€šè¿‡å¯¼å…¥ç§é’¥(WIF)å¯äº§ç”Ÿ `ç§é’¥ã€å…¬é’¥ã€åœ°å€`ã€‚

é€šè¿‡ç§é’¥åˆ›å»ºé’±åŒ…ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```go
func ImportPrivateWIF(wif string, coin string)
```
> å¿…è¦å‚æ•°è¯´æ˜ï¼šç§é’¥(WIF), ä¸»é“¾å¸åç§° coin

åˆ›å»ºè¿”å›çš„æ•°æ®ç»“æ„åŒä¸Š `WalletAccount`ã€‚
### ImportPrivateWIF Example
```go
mnemonic := "xxx xxx"
dogeWallet := hpywallet.GenerateWallet(mnemonic, "doge")
importWallet := hpywallet.ImportPrivateWIF(dogeWallet.PrivateKey, "doge")
fmt.Println("importWallet: ", importWallet)
```
## åŠ©è®°è¯ Or ç§é’¥ç”Ÿæˆ KeyStore
é€šè¿‡ä¼ é€’åŠ©è®°è¯æˆ–ç€ç§é’¥,è®¾å¤‡çš„ UDID,ä»¥åŠ Password,äº§ç”Ÿ KeyStore æ–‡ä»¶ã€‚
åŠ å¯†äº§ç”Ÿ KeyStore æ–‡ä»¶,ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•:

```go
func EnKeystore(privateKey, password, udid string)
```

> å¿…è¦å‚æ•°è¯´æ˜ï¼š mnemonic(æˆ–privateKey), password å¯†ç , æ‰‹æœº udid

åˆ›å»ºè¿”å›çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š

```go
type KeystoreResult struct {
	Result  string // åŠ è§£å¯†è¿”å›çš„å­—ç¬¦ä¸²
	ResCode int    // 0 å¤±è´¥ 1 æˆåŠŸ
	ErrMsg  string // å¤±è´¥åŸå› (ä¾¿äºæ’æŸ¥é—®é¢˜,ä¸æ˜¯å¿…å®šè¿”å›)
}

```
### EnKeystore Example
```go
   privateKey := "L1oh9KNH4XpJgqDodxhjPgaEVS1qwXToWvPf2Zyn6bcm7xxxxxxx"
	pwd := "11111"
	udid := "AOIJF-QWEQR-VDFBET-YTAWWE"

	// Encode
	enResult := hpywallet.EnKeystore(privateKey, pwd, udid)
	fmt.Println("Keystore : \n", enResult.Result)
```
## KeyStore æ–‡ä»¶è§£å¯†
é€šè¿‡ä¼ é€’ KeyStore Json æ–‡ä»¶,è®¾å¤‡çš„ UDID,ä»¥åŠ Password,è§£å¯† KeyStore æ–‡ä»¶ã€‚
è§£å¯† KeyStore æ–‡ä»¶,ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•:

```go
func DeKeystore(json, password, udid string)
```

> å¿…è¦å‚æ•°è¯´æ˜ï¼š KeyStore Json, password å¯†ç , æ‰‹æœº udid

è§£å¯†è¿”å›çš„æ•°æ®ç»“æ„åŒä¸Š `KeystoreResult`ã€‚

### DeKeystore Example
```go
   enResult := "xxxxxxx"
	pwd := "11111"
	udid := "AOIJF-QWEQR-VDFBET-YTAWWE"
  // Decode
	deResult := hpywallet.DeKeystore(enResult, pwd, udid)
	fmt.Println("PrivateKey : ", deResult.Result)
```
## Token ç­¾åç®—æ³•

æ„å»ºå„ Token ç­¾åç®—æ³•

**SignInput** ç»“æ„å¦‚ä¸‹ï¼Œéƒ¨åˆ†å‚æ•°å¯é€‰ï¼Œæ ¹æ®å½“å‰å¸ç§é€‰æ‹©ï¼š

```go
type SignInput struct {
	PrivateKey   string //ç§é’¥
	Coin         string // ä¸»é“¾å¸
	Symbol       string // symbol
	Amount       int64  //è½¬è´¦æ•°é‡
	Change       int64  //æ‰¾é›¶æ•°é‡
	Fee          int64  //äº¤æ˜“è´¹ç”¨
	GasLimit     int64  //ethç³» gasæ•°é‡
	GasPrice     int64  //ethç³» gasä»·æ ¼
	Type         string //äº¤æ˜“åˆçº¦ç±»å‹
	SrcAddr      string //è½¬è´¦åœ°å€
	DestAddr     string //æ¥å—åœ°å€
	ContractAddr string //åˆçº¦åœ°å€
	Memo         string //äº¤æ˜“å¤‡æ³¨
	Sequence     int64  //åºåˆ—å·
	Inputs       []byte //Vinæ„é€ 
	Params       []byte //é¢„ç•™å­—æ®µ
}
```

ç­¾åæ–¹æ³•åç§°ï¼š

```go
func SignRawTransaction(signIn *SignInput)
```

æ–¹æ³•è¿”å›ç»“æ„å¦‚ä¸‹ï¼š

```go
type SignResult struct {
	ResCode int    // 0 å¤±è´¥ 1 æˆåŠŸ
	Coin    string // ä¸»é“¾å¸
	Symbol  string // symbol å¸ç§åç§°
	RawTX   string // ç­¾åè¿”å›çš„ txID
	TxHash  string // äº¤æ˜“ Hash
	ErrMsg  string // å¤±è´¥åŸå› (ä¾¿äºæ’æŸ¥é—®é¢˜,ä¸æ˜¯å¿…å®šè¿”å›)
	ErrCode int    //é”™è¯¯ç (æš‚æ—¶ä¿ç•™)

	Params []byte //é¢„ç•™å­—æ®µ
}
```
### SignRawTransaction Example
```go
mnemonic := "xxx xxx"
btcWallet := hpywallet.GenerateWallet(mnemonic, "btc")
item1 := hpywallet.OutPutItem{
	TxHash:   "921784b1e11fcbfe267a04b9e54a45e597710d0f9413e658813737c06f44a987",
	Value:    1200000,
	Vout:     1,
	Pkscript: "76a914bc68c7efc2f672c3ea028e10ec321a9c68d5da7788ac",
}
outputs := []hpywallet.OutPutItem{item1}
jsonInputs, _ := json.Marshal(outputs)
signInput := &hpywallet.SignInput{
	Coin:       "btc",
	Symbol:     "btc",
	PrivateKey: btcWallet.PrivateKey,
	SrcAddr:    btcWallet.Address,
	DestAddr:   btcWallet.Address,
	Fee:        200000,
	Amount:     100000,
	Change:     900000,
	Inputs:     jsonInputs,
}
tranferResult := hpywallet.SignRawTransaction(signInput)
if tranferResult.ResCode == 0 {
	fmt.Println("Transfer btc Msg: ", tranferResult.ErrMsg)
} else {
	fmt.Println("Transfer btc RawTX: ", tranferResult.RawTX)
}
```


åœ¨ä»¥ä¸Šæ”¯æŒç­¾åç®—æ³•çš„å¸ç§ä¸­ï¼Œ Inputs å¿…ä¼ çš„ä¸»é“¾å¸æœ‰ï¼š

- [x] BTC
- [x] USDT
- [x] LTC
- [x] QTUM
- [x] BCH
- [x] DASH

UTXO Token çš„ Inputs ä¼ é€’çš„æ˜¯ `JsonArrayToByte[OutPutItem...].Bytes`

OutPutItem ç»“æ„å¦‚ä¸‹:

```go
type OutPutItem struct {
	TxHash   string
	Vout     uint32
	Value    int64
	Pkscript string
}
```

æ³¨æ„äº‹é¡¹ï¼š

 - QTUM çš„ QRC20 æ„é€ äº¤æ˜“,ContractAddr åˆçº¦åœ°å€æ˜¯å¿…ä¼ å‚æ•°;


## Token æ„é€ åŸå§‹äº¤æ˜“ç®—æ³•

æ„å»ºåŸå§‹äº¤æ˜“çš„æ•°æ®ç»“æ„åŒç­¾åç®—æ³•ã€‚

**SignInput** å…¥å‚åŒç­¾åäº¤æ˜“:`SignInput`

æ„é€ äº¤æ˜“ç®—æ³•çš„æ–¹æ³•åç§°ï¼š

```go
func CreateRawTransaction(signIn *SignInput)
```
æ„é€ äº¤æ˜“è¿”å›ç»“æœçš„æ•°æ®ç»“æ„åŒç­¾åäº¤æ˜“:`SignInput`

## TODO LIST

**åç»­å¾…å®Œå–„çš„ Token åŠŸèƒ½:**

- [ ] æ ¡éªŒåœ°å€æ˜¯å¦æ­£ç¡®
- [ ] æ„é€ å¤šç­¾äº¤æ˜“
- [ ] æ›´å¤šå¸ç§æ•´ç†å¼€æº

## æ„Ÿè°¢æ”¯æŒ
æ„Ÿè°¢ `btcsuite`ã€`go-ethereum`ã€`blocktree`ç­‰ç¬¬ä¸‰æ–¹åº“çš„æ”¯æŒã€‚

[TOC]
